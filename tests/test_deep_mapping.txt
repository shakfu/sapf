;; deep mapping tests
1 = throwOnError
[
"[10 20]@  [1 2]   + [[11 12][21 22]] equals"
"[10 20]   [1 2]@  + [[11 21][12 22]] equals"
"[10 20]@  [1 2]@  + [11 22] equals"
"[10 20]@1 [1 2]@2 + [[11 12][21 22]] equals"
"[10 20]@2 [1 2]@1 + [[11 21][12 22]] equals"
"[[10 20][30 40]]     [1 2] + [[11 21] [32 42]] equals"
"[[10 20][30 40]] @   [1 2] + [[11 22] [31 42]] equals"
"[[10 20][30 40]] @@  [1 2] + [[[11 12] [21 22]] [[31 32] [41 42]]] equals"
"[[10 20][30 40]] @@@ [1 2] + [[[11 12] [21 22]] [[31 32] [41 42]]] equals"
"[[10 20][30 40]] @1  [1 2] @2 + [[[11 21] [12 22]] [[31 41] [32 42]]] equals"
"[[10 20][30 40]] @2  [1 2] @1 + [[[11 21] [31 41]] [[12 22] [32 42]]] equals"
"[[10 20][30 40]]     \x [x aa neg 2ple] !  [[[10 20] [30 40]] [[-10 -20] [-30 -40]]] equals"
"[[10 20][30 40]] @   \x [x aa neg 2ple] !  [[[10 20] [-10 -20]] [[30 40] [-30 -40]]] equals"
"[[10 20][30 40]] @@  \x [x aa neg 2ple] !  [[[10 -10] [20 -20]] [[30 -30] [40 -40]]] [[[10 -10] [20 -20]] [[30 -30] [40 -40]]] equals"
"[[10 20][30 40]] @@@ \x [x aa neg 2ple] !  [[[10 -10] [20 -20]] [[30 -30] [40 -40]]] [[[10 -10] [20 -20]] [[30 -30] [40 -40]]] equals"
"[1 'a [] \[] {:a 1}] @ type ['Real 'String 'VList 'Fun 'Form] equals"
"20 \n [1 n to @ \a [a n to @ \b [b n to @ \c [ b sq a sq + c sq == \[ a b gcd c gcd 1 > \[[]] \[[[a b c]]] if ]\[[]] if] ! $/ ] ! $/ ] ! $/ ] !
[[3 4 5] [5 12 13] [8 15 17]] equals"
"1 1 5 to to  [[1][1 2][1 2 3][1 2 3 4][1 2 3 4 5]] equals"
"ord 3 1 to N [[1 2 3][1 2][1]] equals"
"0 [1 2 3] by @ [4 5 6] @ N   [[0 1 2 3] [0 2 4 6 8] [0 3 6 9 12 15]] equals"
"[4 5 6] 0 [1 2 3] nby   [[0 1 2 3] [0 2 4 6 8] [0 3 6 9 12 15]] equals"
] aa pr cr
\s [ "Testing : " pr s pr cr
	s compile !
	\[ "Passed" pr cr]
	\[
		"*** FAILED ***" pr cr cr
		throwOnError \[throw] \[] if
	] if
] do
